(()=>{const e=document.querySelector("body"),t=document.querySelector(".city"),n=document.querySelector(".hour"),a=document.querySelector(".time"),r=document.querySelector(".temp"),o=(document.querySelector(".main > img"),document.querySelector(".weather"),document.querySelector("input")),u=document.querySelector(".feelslike > .data"),i=document.querySelector(".wind > .data"),c=document.querySelector(".humidity > .data"),m=document.querySelector(".pressure > .data"),l=["media/bg/clear.png","media/bg/rainy.png","media/bg/snowy.png","media/bg/sunny.png"];async function d(e){const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=16cee363107451176fe52b1753cbc50c&units=metric`),n=await t.json();return"404"==n.cod?0:(localStorage.setItem("lastCity",e),n)}async function s(o){const d=await o;if(!d)return;let s=(new Date).getHours()+":"+(new Date).getMinutes(),y=(new Date).getDate()+"."+((new Date).getMonth()+1)+"."+(new Date).getFullYear();t.innerHTML=d.name,n.innerHTML=s,a.innerHTML=y,r.innerHTML=Math.round(d.main.temp)+"&#8451;",u.innerHTML=Math.round(d.main.feels_like)+"&#8451;",i.innerHTML=d.wind.speed+"km/h",c.innerHTML=d.main.humidity+"%",m.innerHTML=d.main.pressure+"hPa","Clear"==d.weather[0].main?e.style.backgroundImage=`url(${l[0]})`:"Clouds"==d.weather[0].main?e.style.backgroundImage=`url(${l[1]})`:"Atmosphere"==d.weather[0].main?e.style.backgroundImage=`url(${l[2]})`:"Rain"==d.weather[0].main||"Drizzle"==d.weather[0].main||"Thunderstorm"==d.weather[0].main?e.style.backgroundImage=`url(${l[1]})`:"Snow"==d.weather[0].main&&(e.style.backgroundImage=`url(${l[2]})`)}o.onkeydown=e=>{"Enter"==e.key&&(s(d(o.value)),o.value="")},s(d("Manchester")),s(d(localStorage.getItem("lastCity")))})();